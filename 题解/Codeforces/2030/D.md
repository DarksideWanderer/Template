注意到 LR 并行的时候 1~L 不能去到 R~n , 我们可以记录对每个位置前缀是否已经是封闭的 (无需和后缀交换) , 如果需要交换但是这个位置是 LR 的 L 那么将这个位置标记为非法 ,每次询问可以在 O(1) 的时间更换状态 , 如果最后没有非法位置就是 Yes