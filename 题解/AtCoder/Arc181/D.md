这道题也是一个拆分贡献的题 , 由于一次交换带来一个逆序对的变化,我们不妨把这次变化看作较小的那个数的影响 .

再看冒泡排序 , 有一个性质就是每次冒泡在 i 之前第一个比 `p[i]` 大的 j 必然会和 i 交换 , 这是比较显然的 . 又由于 `a[i]` 递增 , 所以会连续操作 , 并且每次贡献都是 1 .

所以我们可以用树状数组维护逆序对 , 然后差分维护删除的逆序个数